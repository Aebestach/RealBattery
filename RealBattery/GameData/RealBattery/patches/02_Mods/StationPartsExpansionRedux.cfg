@PART[sspx-core-5-1,sspx-dome-5-1,sspx-dome-cupola-5-1,sspx-dome-habitation-5-1,sspx-habitation-5-1,sspx-core-25-1,sspx-habitation-25-1,sspx-core-375-1,sspx-cupola-375-1,sspx-habitation-375-3]:NEEDS[StationPartsExpansionRedux]
{
    RBbaseVolume = #$/RESOURCE[ElectricCharge]/maxAmount$
    @RBbaseVolume *= 0.3

    @RESOURCE[ElectricCharge]
    {
        @maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.8
        @amount = #$../RBbaseVolume$
        @amount *= 0.8
    }
    RESOURCE
    {
        name = StoredCharge
        maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.2
        amount = #$../RBbaseVolume$
        @amount *= 0.2
    }

    MODULE
    {
        name = RealBattery
        BatteryTypeDisplayName = #LOC_RB_short_Li_ion
        HighEClevel = 0.95
        LowEClevel = 0.90
        Crate = 1
    }

    MODULE
    {
        name = ModuleB9PartSwitch
        moduleID = batterySwitch
        switcherDescription = #LOC_RB_batterySwitcherDescription
        switcherDescriptionPlural = #LOC_RB_batterySwitcherDescriptionPlural
        baseVolume = #$../RBbaseVolume$

        SUBTYPE
        {
            name = Li_ion
            title = #LOC_RB_title_Li_ion
            descriptionSummary = #LOC_RB_descSum_Li_ion
            descriptionDetail = #LOC_RB_descDet_Li_ion
            tankType = Li_ion
            //upgradeRequired = RB_UpgradeLiIon
            defaultSubtypePriority = 6
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Li_ion
                    Crate = 1
                    SelfDischargeRate = 0.01
                    CycleDurability = 1000
                    ThermalLoss = 0.15
                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.80
                        key = 0.3 0.85
                        key = 0.6 0.90
                        key = 0.85 0.85
                        key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = SSB
            title = #LOC_RB_title_SSB
            descriptionSummary = #LOC_RB_descSum_SSB
            descriptionDetail = #LOC_RB_descDet_SSB
            tankType = SSB
            upgradeRequired = RB_UpgradeSSB
            defaultSubtypePriority = 9
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_SSB
                    Crate = 2
                    SelfDischargeRate = 0.003
                    CycleDurability = 10000
                    ThermalLoss = 0.05
                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.90
                        key = 0.2 0.95
                        key = 0.8 0.95
                        key = 1.0 0.90
                    }
                }
            }
        }
    }
}

@PART[sspx-core-125-1,sspx-cupola-125-1,sspx-utility-125-1,sspx-core-1875-1,sspx-cupola-1875-1,sspx-science-1875-1,sspx-utility-1875-1]:NEEDS[StationPartsExpansionRedux]
{
    RBbaseVolume = #$/RESOURCE[ElectricCharge]/maxAmount$
    @RBbaseVolume *= 0.3

    @RESOURCE[ElectricCharge]
    {
        @maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.25
        @amount = #$../RBbaseVolume$
        @amount *= 0.25
    }
    RESOURCE
    {
        name = StoredCharge
        maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.05
        amount = #$../RBbaseVolume$
        @amount *= 0.05
    }

    MODULE
    {
        name = RealBattery
        BatteryTypeDisplayName = #LOC_RB_short_NiCd
        HighEClevel = 0.95
        LowEClevel = 0.90
        Crate = 0.5
    }

    MODULE
    {
        name = ModuleB9PartSwitch
        moduleID = batterySwitch
        switcherDescription = #LOC_RB_batterySwitcherDescription
        switcherDescriptionPlural = #LOC_RB_batterySwitcherDescriptionPlural
        baseVolume = #$../RBbaseVolume$

        SUBTYPE
        {
            name = NiCd
            title = #LOC_RB_title_NiCd
            descriptionSummary = #LOC_RB_descSum_NiCd
            descriptionDetail = #LOC_RB_descDet_NiCd
            tankType = NiCd
            //upgradeRequired = RB_UpgradeNiCd
            defaultSubtypePriority = 4
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_NiCd
                    Crate = 0.5
                    SelfDischargeRate = 0.03
                    CycleDurability = 500
                    ThermalLoss = 0.2
                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.70
                        key = 0.5 0.75
                        key = 0.9 0.80
                        key = 1.0 0.65
                    }
                }
            }
        }

        SUBTYPE
        {
            name = Li_ion
            title = #LOC_RB_title_Li_ion
            descriptionSummary = #LOC_RB_descSum_Li_ion
            descriptionDetail = #LOC_RB_descDet_Li_ion
            tankType = Li_ion
            upgradeRequired = RB_UpgradeLiIon
            defaultSubtypePriority = 6
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Li_ion
                    Crate = 1
                    SelfDischargeRate = 0.01
                    CycleDurability = 1000
                    ThermalLoss = 0.15
                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.80
                        key = 0.3 0.85
                        key = 0.6 0.90
                        key = 0.85 0.85
                        key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = SSB
            title = #LOC_RB_title_SSB
            descriptionSummary = #LOC_RB_descSum_SSB
            descriptionDetail = #LOC_RB_descDet_SSB
            tankType = SSB
            upgradeRequired = RB_UpgradeSSB
            defaultSubtypePriority = 9
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_SSB
                    Crate = 2
                    SelfDischargeRate = 0.003
                    CycleDurability = 10000
                    ThermalLoss = 0.05
                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.90
                        key = 0.2 0.95
                        key = 0.8 0.95
                        key = 1.0 0.90
                    }
                }
            }
        }
    }
}