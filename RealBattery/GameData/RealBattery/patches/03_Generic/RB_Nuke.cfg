@PART[batteryBankMini,batteryBank,batteryBankLarge]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[batterySwitch]]]:NEEDS[!NearFutureElectrical]
{
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[batterySwitch]]
    {
        SUBTYPE
        {
            name = NukeCell
            title = #LOC_RB_short_Nuke
            descriptionSummary = #LOC_RB_descSum_Nuke
            descriptionDetail = #LOC_RB_descDet_Nuke
            tankType = NukeCell
            upgradeRequired = RB_UpgradeNuke
            defaultSubtypePriority = 0
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Nuke

                    HighEClevel = 2
                    Crate = 0.001

                    SelfDischargeRate = 0.0001            
                    CycleDurability = 1

                    ThermalLoss = 0.4
                    TempOverheat = 1000
                    TempRunaway = 1200

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.0
                        key = 1.0 0.0
                    }
                }
            }
        }
    }
}

@PART[battery-0625,battery-125,battery-25]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[batterySwitch]]]:NEEDS[NearFutureElectrical]
{
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[batterySwitch]]
    {
        SUBTYPE
        {
            name = NukeCell
            title = #LOC_RB_short_Nuke
            descriptionSummary = #LOC_RB_descSum_Nuke
            descriptionDetail = #LOC_RB_descDet_Nuke
            tankType = NukeCell
            upgradeRequired = RB_UpgradeNuke
            defaultSubtypePriority = 0
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Nuke

                    HighEClevel = 2
                    Crate = 0.001

                    SelfDischargeRate = 0.0001            
                    CycleDurability = 1

                    ThermalLoss = 0.4
                    TempOverheat = 1000
                    TempRunaway = 1200

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.0
                        key = 1.0 0.0
                    }
                }
            }
        }
    }
}

@PART[command-375-biconic-1]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[batterySwitch]]]:NEEDS[NearFutureSpacecraft]
{
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[batterySwitch]]
    {
        SUBTYPE
        {
            name = NukeCell
            title = #LOC_RB_short_Nuke
            descriptionSummary = #LOC_RB_descSum_Nuke
            descriptionDetail = #LOC_RB_descDet_Nuke
            tankType = NukeCell
            upgradeRequired = RB_UpgradeNuke
            defaultSubtypePriority = 0
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Nuke

                    Crate = 0.001

                    SelfDischargeRate = 0.0001            
                    CycleDurability = 1

                    ThermalLoss = 0.4
                    TempOverheat = 670
                    TempRunaway = 1270

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.0
                        key = 1.0 0.0
                    }
                }
            }
        }
    }
}

@PART[sspx-core-5-1,sspx-dome-5-1,sspx-dome-cupola-5-1,sspx-dome-habitation-5-1,sspx-habitation-5-1]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[batterySwitch]]]:NEEDS[StationPartsExpansionRedux]
{
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[batterySwitch]]
    {
        SUBTYPE
        {
            name = NukeCell
            title = #LOC_RB_short_Nuke
            descriptionSummary = #LOC_RB_descSum_Nuke
            descriptionDetail = #LOC_RB_descDet_Nuke
            tankType = NukeCell
            upgradeRequired = RB_UpgradeNuke
            defaultSubtypePriority = 0
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Nuke

                    Crate = 0.001

                    SelfDischargeRate = 0.0001            
                    CycleDurability = 1

                    ThermalLoss = 0.4
                    TempOverheat = 670
                    TempRunaway = 1270

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.0
                        key = 1.0 0.0
                    }
                }
            }
        }
    }
}